function findHidingSpot(array) {
  let mousePos = []
  let hidingSpots = []
  for (let i = 0; i < array.length; i++) {
    for (let j = 0; j < array[i].length; j++) {
      if (array[i][j] === 'M') {
        mousePos = [i, j]
        array[i][j] = ' '
      } else if (array[i][j] === ' ' && isIsolated([i, j], array)) {
        hidingSpots.push([i, j])
      }
    }
  }
  let distances = hidingSpots.map(([i, j]) => Math.abs(mousePos[0] - i) + Math.abs(mousePos[1] - j))
  let nearestDistance = Math.min(...distances)
  let nearestDistanceIndex = distances.indexOf(nearestDistance)
  let nearestHidingSpot = hidingSpots[nearestDistanceIndex]

  array[nearestHidingSpot[0]][nearestHidingSpot[1]] = 'M'

  return array

}

function isIsolated([i, j], array) {
  for (let m = i - 1; m <= i + 1; m++) {
    for (let n = j - 1; n <= j + 1; n++) {
      if (m !== i && n !== j && array[m] && array[m][n] === ' ') {
        return false
      }
    }
  }
  return true
}

console.log(findHidingSpot([
  [' ', ' ', '#', '#', '#', ' ', ' ', ' ', ' ', ' '],
  [' ', ' ', '#', ' ', '#', ' ', ' ', ' ', ' ', ' '],
  ['M', ' ', '#', '#', '#', ' ', ' ', ' ', ' ', ' '],
  [' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
  [' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
  [' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#', '#'],
  [' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#', ' '],
  [' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#', '#'],
  [' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ']
]))

/* 

[ [ ' ', ' ', '#', '#', '#', ' ', ' ', ' ', ' ', ' ' ],
  [ ' ', ' ', '#', 'M', '#', ' ', ' ', ' ', ' ', ' ' ],
  [ ' ', ' ', '#', '#', '#', ' ', ' ', ' ', ' ', ' ' ],
  [ ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ' ],
  [ ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ' ],
  [ ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#', '#' ],
  [ ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#', ' ' ],
  [ ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#', '#' ],
  [ ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ' ] ]

*/

console.log(findHidingSpot([
  [' ', '#', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
  ['#', '#', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
  [' ', ' ', ' ', ' ', ' ', ' ', '#', '#', '#', ' '],
  [' ', ' ', ' ', ' ', ' ', ' ', '#', ' ', '#', ' '],
  [' ', ' ', ' ', ' ', ' ', ' ', '#', '#', '#', ' '],
  [' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
  [' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
  [' ', ' ', ' ', ' ', ' ', ' ', 'M', ' ', ' ', ' '],
  [' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
]))

/* 

[ [ ' ', '#', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ' ],
  [ '#', '#', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ' ],
  [ ' ', ' ', ' ', ' ', ' ', ' ', '#', '#', '#', ' ' ],
  [ ' ', ' ', ' ', ' ', ' ', ' ', '#', 'M', '#', ' ' ],
  [ ' ', ' ', ' ', ' ', ' ', ' ', '#', '#', '#', ' ' ],
  [ ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ' ],
  [ ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ' ],
  [ ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ' ],
  [ ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ' ] ]

*/

console.log(findHidingSpot([
  [' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
  [' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
  [' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
  ['#', '#', '#', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
  ['#', ' ', '#', ' ', ' ', 'M', ' ', ' ', ' ', ' '],
  ['#', '#', '#', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
  [' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
  [' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
  [' ', ' ', ' ', ' ', ' ', '#', '#', '#', ' ', ' '],
  [' ', ' ', ' ', ' ', ' ', '#', ' ', '#', ' ', ' ']
]))

/* 

[ [ ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ' ],
  [ ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ' ],
  [ ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ' ],
  [ '#', '#', '#', ' ', ' ', ' ', ' ', ' ', ' ', ' ' ],
  [ '#', 'M', '#', ' ', ' ', ' ', ' ', ' ', ' ', ' ' ],
  [ '#', '#', '#', ' ', ' ', ' ', ' ', ' ', ' ', ' ' ],
  [ ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ' ],
  [ ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ' ],
  [ ' ', ' ', ' ', ' ', ' ', '#', '#', '#', ' ', ' ' ],
  [ ' ', ' ', ' ', ' ', ' ', '#', ' ', '#', ' ', ' ' ] ]

*/


console.log(findHidingSpot([
  [' ', '#', ' ', '#', ' ', ' ', ' ', ' ', ' ', ' '],
  [' ', '#', '#', '#', ' ', ' ', ' ', ' ', ' ', ' '],
  [' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
  [' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
  [' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
  [' ', ' ', ' ', ' ', ' ', ' ', ' ', 'M', ' ', ' '],
  [' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '],
  [' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#', '#'],
  [' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#', ' '],
]))

/* 

[ [ ' ', '#', ' ', '#', ' ', ' ', ' ', ' ', ' ', ' ' ],
  [ ' ', '#', '#', '#', ' ', ' ', ' ', ' ', ' ', ' ' ],
  [ ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ' ],
  [ ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ' ],
  [ ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ' ],
  [ ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ' ],
  [ ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ' ],
  [ ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#', '#' ],
  [ ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '#', 'M' ] ]

*/